# Slug

[![CI](https://github.com/thomashoneyman/purescript-slug/workflows/CI/badge.svg?branch=main)](https://github.com/thomashoneyman/purescript-slug/actions?query=workflow%3ACI+branch%3Amain)
[![Latest release](http://img.shields.io/github/release/thomashoneyman/purescript-slug.svg)](https://github.com/thomashoneyman/purescript-slug/releases)
[![Latest package set](https://img.shields.io/endpoint.svg?url=https://package-sets-badge-0lf69kxs4fbd.runkit.sh/slug)](https://github.com/purescript/package-sets)
[![Maintainer: thomashoneyman](https://img.shields.io/badge/maintainer-thomashoneyman-lightgrey.svg)](http://github.com/thomashoneyman)

Type-safe slugs for PureScript.

## Installation

```sh
spago install slug
```

## Overview

This package provides a `Slug` type and related type classes & helper functions to help you construct and use type-safe slugs. By default (when using a `Slug` constructed via the `generate` and `parse` functions) you're guaranteed that the following properties hold:

- it isn't empty
- it only contains groups of alpha-numeric characters in the Latin-1 character set separated by dashes (`-`)
- it does not start or end with a dash
- there are never two dashes in a row
- every character is lower cased

For generating and parsing slugs with different properties see `generateWithOptions` and `parseWithOptions` in the [Options section](#options) below.

## Use

Create a slug with `Slug.generate`:

```purs
generate :: String -> Maybe Slug

> Slug.generate "This is an article!"
(Just (Slug "this-is-an-article"))

> Slug.generate "¬¬¬{}¬¬¬"
Nothing
```

Parse a string that is (supposedly) already a slug with `Slug.parse`:

```purs
parse :: String -> Either SlugError Slug

> Slug.parse "this-is-an-article"
(Just (Slug "this-is-an-article"))

> Slug.parse "-this-is--not-"
Nothing
```

Recover a string from a valid `Slug` with `Slug.toString`:

```purs
toString :: Slug -> String

> map Slug.toString (mySlug :: Slug)
(Just "this-is-an-article")
```

## Options

Generate and parse a slug with custom `Options`.

```purescript
type Options =
  { replacement :: String           -- used to replace spaces 
  , keepIf :: CodePoint -> Boolean  -- which characters are allowed in the slug
  , lowerCase :: Boolean            -- transform characters to lower-case
  , stripApostrophes :: Boolean     -- remove apostrophes (to avoid unnecessary word-breaks)
  }
```

`Options` can be constructed from scratch, or by modifying the default options (which are used in `parse` and `generate`)

```purescript
defaultOptions :: Options
defaultOptions =
  { replacement: "-"
  , keepIf: isAlphaNum && isLatin1
  , lowerCase: true
  , stripApostrophes: true
  }
```

Custom `Options` can be useful when working with slugs generated by other libraries, for example, the popular `slugify` package on npm.

```purescript
> slugifyOptions = Slug.defaultOptions { keepIf = isLatin1, lowerCase = false, stripApostrophes = false }
> parse = Slug.parseWithOptions slugifyOptions

> parse "This-is-my-article's-title!"
(Just (Slug "This-is-my-article's-title!"))
```

Or just using a different separator than the default `"-"`.

```purescript
> myOptions = Slug.defaultOptions { replacement = "_" }
> Slug.generateWithOptions myOptions "My article title"
(Just (Slug "my_article_title"))
```

## Contributing

Read the [contribution guidelines](https://github.com/thomashoneyman/purescript-slug/blob/main/.github/contributing.md) to get started and see helpful related resources.

Inspired by the Haskell [slug](https://github.com/mrkkrp/slug) library by [@mrkkrp](https://github.com/mrkkrp). Some naming conventions mirror [elm-slug](https://github.com/hecrj/elm-slug).
